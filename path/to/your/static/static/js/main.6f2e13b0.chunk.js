(this.webpackJsonpfridgeproject=this.webpackJsonpfridgeproject||[]).push([[0],{101:function(e,t,a){e.exports=a.p+"static/media/smartfridge.b39668d2.jpg"},309:function(e,t,a){e.exports=a(321)},321:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(277),o=a.n(i),s=a(25),l=a(12),c=a(377),d=a(372),h=a(382),u=a(278),g=a(20),m=a(291),p=a(21);var b=Object(m.a)({palette:{primary:{contrastText:"#FFFFFF",dark:p.a.blue[900],main:p.a.blue[500],light:p.a.blue[100]},secondary:{contrastText:"#FFFFFF",dark:p.a.teal[900],main:p.a.teal[700],light:p.a.teal[500]},error:{contrastText:"#FFFFFF",dark:p.a.red[900],main:p.a.red[600],light:p.a.red[400]},background:{default:"#F4F6F8",paper:"#FFFFFF"},text:{primary:p.a.grey[900],secondary:p.a.grey[700],link:p.a.blue[600]}},typography:{fontSize:14,htmlFontSize:16,body1:{fontSize:"1rem"},h1:{fontSize:"2.125rem","@media (max-width:600px)":{fontSize:"1.5rem"}},h2:{fontSize:"1.5rem","@media (max-width:600px)":{fontSize:"1.25rem"}}},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}}}),E=a(383),y=a(108),f=a(384),O=a(379),j=a(101),I=a.n(j);class w extends r.Component{constructor(){super(...arguments),this.handleSignInButtonClicked=()=>{this.props.onSignIn()}}render(){return n.a.createElement("div",{style:{backgroundImage:"url(".concat(I.a,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:-1}},n.a.createElement(E.a,{sx:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},n.a.createElement(E.a,{sx:{width:"auto",maxWidth:360,padding:3,borderRadius:2,boxShadow:3,backgroundColor:"background.paper"}},n.a.createElement(y.a,{sx:{margin:2},variant:"h5",align:"center",fontWeight:"bold"},"Welcome to SmartFridge"),n.a.createElement(y.a,{sx:{margin:2},align:"center"},"It appears that you are not signed in."),n.a.createElement(y.a,{sx:{margin:2},align:"center"},"Sign in to your SmartFridge"),n.a.createElement(f.a,{container:!0,justifyContent:"center"},n.a.createElement(O.a,{variant:"contained",color:"primary",sx:{mt:2},onClick:this.handleSignInButtonClicked},"Sign in with Google")),n.a.createElement(f.a,{container:!0,justifyContent:"center",sx:{mt:1}},n.a.createElement(y.a,{variant:"body2"},"Don't have an account? ",n.a.createElement("a",{href:"https://www.google.com",target:"_blank"},"Sign up!"))))))}}var S=w;var v={apiKey:"AIzaSyADK9EcfaMt57s0tETlJ6ss-u-D-sHLFbw",authDomain:"sopra-gruppe-07.firebaseapp.com",projectId:"sopra-gruppe-07",storageBucket:"sopra-gruppe-07.appspot.com",messagingSenderId:"57134648348",appId:"1:57134648348:web:00719678c07c1dda5763d9"},x=a(6),U=a(17),C=a(375),P=a(392),F=a(280),H=a.n(F),R=Object(U.a)("standardText");class A extends r.Component{constructor(){super(...arguments),Object.defineProperty(this,R,{writable:!0,value:"Definitiv Halis schuld"})}render(){const{error:e,contextErrorMsg:t,onReload:a}=this.props;return null!==e?n.a.createElement(C.a,{severity:"error"},n.a.createElement("div",null,Object(x.a)(this,R)[R]),n.a.createElement(P.a,null,t),n.a.createElement("div",null,"Error message (for debugging only) is:"),n.a.createElement("div",null,e.message),a?n.a.createElement("div",null,n.a.createElement(O.a,{sx:{marginTop:2},variant:"contained",color:"primary",startIcon:n.a.createElement(H.a,null),onClick:a},"Reload")):null):null}}var k=A,N=a(393);class D extends r.Component{render(){const{show:e}=this.props;return e?n.a.createElement("div",null,n.a.createElement(N.a,{sx:{width:"100%",marginTop:2},color:"secondary"})):null}}var _=D,T=a(385),L=a(378),J=a(396),B=a(397),W=a(391),G=a(386),q=a(394),z=a(366),M=a(367),Q=Object(U.a)("avatarButtonRef");class V extends r.Component{constructor(e){super(e),Object.defineProperty(this,Q,{writable:!0,value:Object(r.createRef)()}),this.handleAvatarButtonClick=()=>{this.setState({open:!this.state.open})},this.handleClose=()=>{this.setState({open:!1})},this.handleSignOutButtonClicked=()=>{const e=Object(g.b)();Object(g.e)(e).then(()=>{this.props.navigate("/")})},this.state={open:!1}}render(){const{user:e}=this.props,{open:t}=this.state;return e?n.a.createElement(E.a,null,n.a.createElement(W.a,{sx:{float:"right"},ref:Object(x.a)(this,Q)[Q],onClick:this.handleAvatarButtonClick},n.a.createElement(G.a,{src:e.photoURL})),n.a.createElement(q.b,{open:t,anchorEl:Object(x.a)(this,Q)[Q].current,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{mt:1,boxShadow:3,borderRadius:2,width:260}}},n.a.createElement(z.a,{onClickAway:this.handleClose},n.a.createElement(T.a,{sx:{padding:2,bgcolor:"background.default"}},n.a.createElement(y.a,{align:"center",variant:"h6",sx:{fontWeight:"bold",color:"primary.main"}},"Hello"),n.a.createElement(M.a,{sx:{margin:1}}),n.a.createElement(y.a,{align:"center",variant:"body1",sx:{fontWeight:"medium"}},e.displayName),n.a.createElement(y.a,{align:"center",variant:"body2",sx:{color:"text.secondary"}},e.email),n.a.createElement(M.a,{sx:{margin:1}}),n.a.createElement(f.a,{container:!0,justifyContent:"center"},n.a.createElement(f.a,{item:!0},n.a.createElement(O.a,{color:"primary",variant:"contained",onClick:this.handleSignOutButtonClicked,sx:{mt:1}},"Logout"))))))):null}}var K=e=>{const t=Object(l.p)();return n.a.createElement(V,Object.assign({},e,{navigate:t}))},Y=a(285),Z=a.n(Y),$=a(283),X=a.n($),ee=a(90),te=a.n(ee),ae=a(287),re=a.n(ae),ne=a(127),ie=a.n(ne),oe=a(284),se=a.n(oe),le=a(286),ce=a.n(le);class de extends r.Component{constructor(){super(...arguments),this.state={tabindex:0},this.handleTabChange=(e,t)=>{this.setState({tabindex:t})}}render(){const{user:e}=this.props,{tabindex:t}=this.state;return n.a.createElement(T.a,{variant:"outlined",style:{borderRadius:"10px",overflow:"hidden",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.2)"}},n.a.createElement(K,{user:e}),n.a.createElement(y.a,{variant:"h3",component:"h1",align:"center",style:{marginTop:"20px",marginBottom:"10px",fontWeight:"bold"}},"HdMSmartFridge"),e&&n.a.createElement(L.a,{indicatorColor:"primary",textColor:"primary",centered:!0,value:t,onChange:this.handleTabChange,style:{marginBottom:"20px"}},n.a.createElement(J.a,{title:"Here is our Homepage"},n.a.createElement(B.a,{icon:n.a.createElement(te.a,null),label:"Home",component:s.b,to:"/home"})),n.a.createElement(J.a,{title:"Here you can find your saved Recipes"},n.a.createElement(B.a,{icon:n.a.createElement(X.a,null),label:"Recipes",component:s.b,to:"/recipe"})),n.a.createElement(J.a,{title:"Here you can find your Groceries"},n.a.createElement(B.a,{icon:n.a.createElement(ie.a,null),label:"Fridge",component:s.b,to:"/fridge"})),n.a.createElement(J.a,{title:"Here you can see whos in your Household"},n.a.createElement(B.a,{icon:n.a.createElement(se.a,null),label:"Household",component:s.b,to:"/household"})),n.a.createElement(J.a,{title:"Here you can edit your User Profile"},n.a.createElement(B.a,{icon:n.a.createElement(Z.a,null),label:"User",component:s.b,to:"/user"})),n.a.createElement(J.a,{title:"Here you can see the available the Units"},n.a.createElement(B.a,{icon:n.a.createElement(ce.a,null),label:"Units",component:s.b,to:"/unit"})),n.a.createElement(J.a,{title:"About our App"},n.a.createElement(B.a,{icon:n.a.createElement(re.a,null),label:"About",component:s.b,to:"/about"}))))}}var he=de;a(387);r.Component;class ue{constructor(){this.id=0}setId(e){this.id=e}getId(){return this.id}toString(){let e="";for(let t in this)e+=t+": "+this[t]+" ";return e}}class ge extends ue{constructor(e,t,a,r,n){super(),this.nick_name=e,this.first_name=t,this.last_name=a,this.household_id=r,this.google_user_id=n}setfirstname(e){this.first_name=e}getfirsname(){return this.firstname}setlastname(e){this.last_name=e}getlastname(){return this.lastname}setnickname(e){this.nick_name=e}getnickname(){return this.nick_name}setgoogleuserid(e){this.google_user_id=e}getgoogleuserid(){return this.googleuserid}sethouseholdid(e){this.ahouseholdid=e}gethouseholdid(){return this.householdid}static fromJSON(e){let t=[];if(Array.isArray(e))e.forEach(e=>{Object.setPrototypeOf(e,ge.prototype),t.push(e)});else{let a=e;Object.setPrototypeOf(a,ge.prototype),t.push(a)}return t}}class me extends ue{constructor(e,t,a){super(),this.groceries_designation=e,this.quantity=t,this.unit=a}setDesignation(e){this.groceries_designation=e}getDesignation(){return this.groceries_designation}setQuantity(e){this.quantity=e}getQuantity(){return this.quantity}setUnit(e){this.unit=e}getUnit(){return this.unit}static fromJSON(e){return e.map(e=>{let t=new me(e.groceries_designation,e.quantity,e.unit);return t.setId(e.id),t})}}class pe extends ue{constructor(e,t,a,r,n){super(),this.title=e,this.creator=t,this.numberOfPersons=a,this.description=r,this.householdId=n}setTitle(e){this.title=e}getTitle(){return this.title}setCreator(e){this.creator=e}getCreator(){return this.creator}setNumberOfPersons(e){this.numberOfPersons=e}getNumberOfPersons(){return this.numberOfPersons}setDescription(e){this.description=e}getDescription(){return this.description}setHouseholdId(e){this.householdId=e}getHouseholdId(){return this.householdId}static fromJSON(e){let t=[];if(Array.isArray(e))e.forEach(e=>{let a=new pe(e.title,e.creator,e.numberOfPersons,e.description,e.householdId);a.setId(e.id),t.push(a)});else{let a=e,r=new pe(a.title,a.creator,a.numberOfPersons,a.description,a.householdId);r.setId(a.id),t.push(r)}return t}}class be extends me{constructor(e,t,a,r){super(e,t,a),this.recipe_id=r}setRecipeId(e){this.recipe_id=e}getRecipeId(){return this.recipe_id}static fromJSON(e){return Array.isArray(e)||(e=[e]),e.map(e=>{let t=new be(e.groceries_designation,e.quantity,e.unit,e.recipe_id);return t.setId(e.id),t})}}class Ee extends me{constructor(e,t,a,r){super(e,t,a),this.fridgeId=r}getFridgeId(){return this.fridgeId}setFridgeId(e){this.fridgeId=e}static fromJSON(e){return Array.isArray(e)||(e=[e]),e.map(e=>{let t=new Ee(e.groceries_designation,e.quantity,e.unit,e.fridge_id);return t.setId(e.id),t})}}class ye extends ue{constructor(e,t){super(),this.name=e,this.fridge_id=t}setname(e){this.name=e}getname(){return this.name}setfridge_id(e){this.afridgeid=e}getfridgeid(){return this.afridgeid}static fromJSON(e){let t=[];if(Array.isArray(e))e.forEach(e=>{Object.setPrototypeOf(e,ye.prototype),t.push(e)});else{let a=e;Object.setPrototypeOf(a,ye.prototype),t.push(a)}return t}}class fe extends ue{constructor(){super()}static fromJSON(e){let t=[];if(Array.isArray(e))e.forEach(e=>{Object.setPrototypeOf(e,fe.prototype),t.push(e)});else{let a=e;Object.setPrototypeOf(a,fe.prototype),t.push(a)}return t}}class Oe extends ue{constructor(e,t){super(),this.designation=e,this.household_id=t}getDesignation(){return this.designation}setDesignation(e){this.designation=e}getHouseholdId(){return this.household_id}setHouseholdId(e){this.household_id=e}static fromJSON(e){let t=[];if(Array.isArray(e))e.forEach(e=>{Object.setPrototypeOf(e,Oe.prototype),t.push(e)});else{let a=e;Object.setPrototypeOf(a,Oe.prototype),t.push(a)}return t}}var je=Object(U.a)("api"),Ie=Object(U.a)("fridgeserverbaseurl"),we=Object(U.a)("getFridgeEntriesURL"),Se=Object(U.a)("addFridgeEntryURL"),ve=Object(U.a)("getFridgeEntryURL"),xe=Object(U.a)("updateFridgeEntryURL"),Ue=Object(U.a)("deleteFridgeEntryURL"),Ce=Object(U.a)("getFridgeEntriesbyFridgeID"),Pe=Object(U.a)("getRecipeEntriesURL"),Fe=Object(U.a)("addRecipeEntryURL"),He=Object(U.a)("getRecipeEntryURL"),Re=Object(U.a)("getRecipeEntriesByRecipeIdURL"),Ae=Object(U.a)("updateRecipeEntryURL"),ke=Object(U.a)("deleteRecipeEntryURL"),Ne=Object(U.a)("getFridgesURL"),De=Object(U.a)("addFridgeURL"),_e=Object(U.a)("getFridgeIdByGoogleUserIdURL"),Te=Object(U.a)("getUsersURL"),Le=Object(U.a)("addUserURL"),Je=Object(U.a)("getUserURL"),Be=Object(U.a)("updateUserURL"),We=Object(U.a)("deleteUserURL"),Ge=Object(U.a)("searchUserURL"),qe=Object(U.a)("searchUserbygoogleIDURL"),ze=Object(U.a)("getRecipesURL"),Me=Object(U.a)("addRecipeURL"),Qe=Object(U.a)("getRecipeURL"),Ve=Object(U.a)("updateRecipeURL"),Ke=Object(U.a)("deleteRecipeURL"),Ye=Object(U.a)("getHouseholdIdByGoogleUserIdURL"),Ze=Object(U.a)("getRecipesbyhouseholdIdURL"),$e=Object(U.a)("getHouseholdsURL"),Xe=Object(U.a)("addHouseholdURL"),et=Object(U.a)("getHouseholdUsersbyIDURL"),tt=Object(U.a)("getHouseholdbyIDURl"),at=Object(U.a)("updateHouseholdURL"),rt=Object(U.a)("deleteHouseholdURL"),nt=Object(U.a)("getUnitsbyIdURL"),it=Object(U.a)("deleteUnitURL"),ot=Object(U.a)("getUnitsbyIdandDesignationURL"),st=Object(U.a)("addUnitURL"),lt=Object(U.a)("cookfunctionurl"),ct=Object(U.a)("fetchAdvanced");class dt{constructor(){Object.defineProperty(this,Ie,{writable:!0,value:"http://127.0.0.1:5000/fridge"}),Object.defineProperty(this,we,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/FridgeEntries")}),Object.defineProperty(this,Se,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/FridgeEntries")}),Object.defineProperty(this,ve,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/FridgeEntry/").concat(e)}),Object.defineProperty(this,xe,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/FridgeEntry/").concat(e)}),Object.defineProperty(this,Ue,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/FridgeEntry/").concat(e)}),Object.defineProperty(this,Ce,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/FridgeEntries/").concat(e)}),Object.defineProperty(this,Pe,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeEntries")}),Object.defineProperty(this,Fe,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeEntries")}),Object.defineProperty(this,He,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeEntry/").concat(e)}),Object.defineProperty(this,Re,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeEntries/").concat(e)}),Object.defineProperty(this,Ae,{writable:!0,value:(e,t)=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeEntry/").concat(e,"/").concat(t)}),Object.defineProperty(this,ke,{writable:!0,value:(e,t)=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeEntry/").concat(e,"/").concat(t)}),Object.defineProperty(this,Ne,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/Fridge")}),Object.defineProperty(this,De,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/Fridge")}),Object.defineProperty(this,_e,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/fridge-id-by-google-id/").concat(e)}),Object.defineProperty(this,Te,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/users")}),Object.defineProperty(this,Le,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/users")}),Object.defineProperty(this,Je,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/users/").concat(e)}),Object.defineProperty(this,Be,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/users/").concat(e)}),Object.defineProperty(this,We,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/users/").concat(e)}),Object.defineProperty(this,Ge,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/users/").concat(e)}),Object.defineProperty(this,qe,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/user-by-google-id/").concat(e)}),Object.defineProperty(this,ze,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeList")}),Object.defineProperty(this,Me,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeList")}),Object.defineProperty(this,Qe,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/Recipe/").concat(e)}),Object.defineProperty(this,Ve,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/Recipe/$/").concat(e)}),Object.defineProperty(this,Ke,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/Recipe/").concat(e)}),Object.defineProperty(this,Ye,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/household-id-by-google-id/").concat(e)}),Object.defineProperty(this,Ze,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/RecipeList/").concat(e)}),Object.defineProperty(this,$e,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/Household")}),Object.defineProperty(this,Xe,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/Household")}),Object.defineProperty(this,et,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/Household/").concat(e)}),Object.defineProperty(this,tt,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/HouseholdbyID/").concat(e)}),Object.defineProperty(this,at,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/Household/").concat(e)}),Object.defineProperty(this,rt,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/Household/").concat(e)}),Object.defineProperty(this,nt,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/Unit/").concat(e)}),Object.defineProperty(this,it,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/Unit/").concat(e)}),Object.defineProperty(this,ot,{writable:!0,value:(e,t)=>"".concat(Object(x.a)(this,Ie)[Ie],"/Unit}/").concat(t,"/").concat(e)}),Object.defineProperty(this,st,{writable:!0,value:()=>"".concat(Object(x.a)(this,Ie)[Ie],"/Unit")}),Object.defineProperty(this,lt,{writable:!0,value:e=>"".concat(Object(x.a)(this,Ie)[Ie],"/COOK/").concat(e)}),Object.defineProperty(this,ct,{writable:!0,value:(e,t)=>fetch(e,t).then(e=>{if(!e.ok)throw Error("".concat(e.status," ").concat(e.statusText));return e.json()})})}static getAPI(){return null==Object(x.a)(this,je)[je]&&(Object(x.a)(this,je)[je]=new dt),Object(x.a)(this,je)[je]}getUsers(){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Te)[Te]()).then(e=>{let t=ge.fromJSON(e);return new Promise((function(e){e(t)}))})}addUnit(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,st)[st](),{method:"POST",headers:{Accept:"application/json, text/plain","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e).catch(e=>{throw console.error("Failed to add unit:",e),new Error("Error adding unit")})}getUnitbyHouseholdId(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,nt)[nt](e)).then(e=>{let t=Oe.fromJSON(e);return new Promise((function(e){e(t)}))}).catch(e=>{console.error("Error fetching unit by household ID:",e)})}deleteUnit(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,it)[it](e),{method:"DELETE"}).then(()=>({message:"Unit deleted successfully",id:e}))}getHouseholds(){return Object(x.a)(this,ct)[ct](Object(x.a)(this,$e)[$e]()).then(e=>{let t=ye.fromJSON(e);return new Promise((function(e){e(t)}))})}getFridgeEntries(){return Object(x.a)(this,ct)[ct](Object(x.a)(this,we)[we]()).then(e=>{let t=Ee.fromJSON(e);return new Promise((function(e){e(t)}))})}getRecipeEntries(){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Pe)[Pe]()).then(e=>{let t=be.fromJSON(e);return new Promise((function(e){e(t)}))})}getRecipes(){return Object(x.a)(this,ct)[ct](Object(x.a)(this,ze)[ze]()).then(e=>{let t=pe.fromJSON(e);return new Promise((function(e){e(t)}))})}getFridges(){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ie)[Ie]()).then(e=>{let t=fe.fromJSON(e);return new Promise((function(e){e(t)}))})}getUserbyId(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Je)[Je](e)).then(e=>{let t=ge.fromJSON(e);return new Promise((function(e){e(t)}))})}getUserbyGoogleUserId(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,qe)[qe](e)).then(e=>{let t=ge.fromJSON(e);return new Promise((function(e){e(t)}))})}getUserbyNickname(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ge)[Ge](e)).then(e=>{let t=ge.fromJSON(e);return new Promise((function(e){e(t)}))})}getUsersbyHouseholdID(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,et)[et](e)).then(e=>{let t=ye.fromJSON(e);return new Promise((function(e){e(t)}))})}getHouseholdbyID(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,tt)[tt](e)).then(e=>{let t=ye.fromJSON(e);return new Promise((function(e){e(t)}))})}getRecipeByID(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Qe)[Qe](e)).then(e=>{let t=pe.fromJSON(e);return new Promise((function(e){e(t)}))})}getRecipeEntriesByRecipeId(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Re)[Re](e)).then(e=>0===e.length?[]:be.fromJSON(e)).catch(e=>{throw console.error("Error fetching recipe entries:",e),e})}getFridgeEntriesbyFridgeId(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ce)[Ce](e)).then(e=>{let t=fe.fromJSON(e);return new Promise((function(e){e(t)}))})}getRecipesbyhouseholdId(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ze)[Ze](e)).then(e=>{let t=pe.fromJSON(e);return new Promise((function(e){e(t)}))})}getFridgeIdByGoogleUserId(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,_e)[_e](e)).then(e=>e).catch(e=>{throw console.error("Failed to fetch fridge ID:",e),new Error("Error fetching fridge ID by Google User ID")})}getHouseholdIdByGoogleUserId(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ye)[Ye](e)).then(e=>e).catch(e=>{throw console.error("Failed to fetch household ID:",e),new Error("Error fetching household ID by Google User ID")})}addUser(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Le)[Le](),{method:"POST",credentials:"include",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then(e=>{let t=ge.fromJSON(e)[0];return new Promise((function(e){e(t)}))})}addFridgeEntry(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ie)[Ie]+"/FridgeEntries",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fridge_id:e.getFridgeId(),groceries_designation:e.getDesignation(),quantity:e.getQuantity(),unit:e.getUnit()})}).then(e=>Ee.fromJSON([e])[0]).catch(e=>{throw console.error("Failed to add fridge entry:",e),new Error("Error adding fridge entry: ".concat(e.message))})}addRecipeEntry(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Fe)[Fe](),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recipe_id:e.getRecipeId(),groceries_designation:e.getDesignation(),quantity:e.getQuantity(),unit:e.getUnit()})}).then(e=>be.fromJSON([e])[0]).catch(e=>{throw console.error("Failed to add fridge entry:",e),new Error("Error adding fridge entry: ".concat(e.message))})}addRecipe(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ie)[Ie]+"/RecipeList",{method:"POST",headers:{Accept:"application/json, text/plain","Content-Type":"application/json"},body:JSON.stringify({id:e.getId(),title:e.getTitle(),creator:e.getCreator(),number_of_persons:e.getNumberOfPersons(),description:e.getDescription(),household_id:e.getHouseholdId()})}).then(e=>pe.fromJSON(e)[0])}addHousehold(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Xe)[Xe](),{method:"POST",headers:{Accept:"application/json, text/plain","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>ye.fromJSON(e)[0]).catch(e=>{throw console.error("Failed to add a recipe:",e),new Error("Error adding recipe: ${error.message}")})}addFridge(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,De)[De](),{method:"POST",headers:{Accept:"application/json, text/plain","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>fe.fromJSON(e)[0])}updateUser(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Be)[Be](e.id),{method:"PUT",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then(e=>{let t=ge.fromJSON(e)[0];return new Promise((function(e){e(t)}))})}deleteUser(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,We)[We](e),{method:"DELETE"}).then(e=>{let t=ge.fromJSON(e)[0];return new Promise((function(e){e(t)}))})}updateFridgeEntry(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,xe)[xe](e.designation),{method:"PUT",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then(e=>Ee.fromJSON(e)[0])}updateRecipeEntry(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ae)[Ae](e.getDesignation(),e.getRecipeId()),{method:"PUT",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then(e=>be.fromJSON(e)[0])}deleteFridgeEntry(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ue)[Ue](e),{method:"DELETE"}).then(()=>({message:"Fridge entry deleted successfully",groceriesDesignation:e}))}updateRecipe(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ve)[Ve](e.getId()),{method:"PUT",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then(e=>pe.fromJSON(e)[0])}deleteRecipe(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,Ke)[Ke](e),{method:"DELETE"}).then(()=>({message:"Recipe deleted successfully",id:e}))}updateHousehold(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,at)[at](e.id),{method:"PUT",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then(e=>ye.fromJSON(e)[0])}deleteHousehold(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,rt)[rt](e),{method:"DELETE"}).then(()=>({message:"Household deleted successfully",id:e}))}deleteRecipeEntry(e,t){return Object(x.a)(this,ct)[ct](Object(x.a)(this,ke)[ke](e,t),{method:"DELETE"}).then(()=>({message:"Recipe entry deleted successfully",groceriesDesignation:e})).catch(t=>{throw console.error("Failed to delete recipe entry:",e,t),new Error("Error deleting recipe entry")})}cookRecipe(e){return Object(x.a)(this,ct)[ct](Object(x.a)(this,lt)[lt](e),{method:"PUT",headers:{Accept:"application/json, text/plain","Content-type":"application/json"}}).then(e=>e)}}Object.defineProperty(dt,je,{writable:!0,value:null});var ht=dt,ut=a(398),gt=a(368),mt=a(399),pt=a(400),bt=a(388),Et=a(369),yt=a(370),ft=a(402),Ot=a(409);class jt extends r.Component{constructor(){super(...arguments),this.state={households:[],selectedHouseholdId:null,newHouseholdName:"",dialogOpen:!1,error:null,loading:!0,householdConfirmed:!1},this.checkForHousehold=async()=>{const e=Object(g.b)().currentUser;if(e)try{const t=await ht.getAPI().getUserbyGoogleUserId(e.uid);t&&t.length>0&&t[0].household_id?this.state.householdConfirmed||(this.props.onHouseholdConfirmed(t[0].household_id),this.setState({loading:!1,householdConfirmed:!0,dialogOpen:!1})):(await this.fetchHouseholds(),this.setState({dialogOpen:!0,loading:!1}))}catch(t){this.setState({error:t.message,loading:!1})}else this.setState({error:"No user logged in",loading:!1})},this.fetchHouseholds=async()=>{try{const e=await ht.getAPI().getHouseholds();this.setState({households:e,loading:!1})}catch(e){this.setState({error:e.message,loading:!1})}},this.handleSelectHousehold=e=>{this.state.householdConfirmed||(this.setState({selectedHouseholdId:e,dialogOpen:!1,householdConfirmed:!0}),this.props.onHouseholdConfirmed(e))},this.handleInputChange=e=>{this.setState({newHouseholdName:e.target.value})},this.addHousehold=async()=>{const{newHouseholdName:e}=this.state;if(e.trim()){this.setState({loading:!0});try{let t=new ye({name:e,id:0,fridge_id:null});const a=await ht.getAPI().addHousehold(t),r=Object(g.b)().currentUser;if(!r)throw new Error("No authenticated user found.");{let e=await ht.getAPI().getUserbyGoogleUserId(r.uid);if(!(e&&e.length>0))throw new Error("Failed to fetch user data for updating.");{let t=e[0];t.household_id=a.id,await ht.getAPI().updateUser(t),this.state.householdConfirmed||(this.setState({loading:!1,dialogOpen:!1,newHouseholdName:"",householdConfirmed:!0}),this.props.onHouseholdConfirmed(a.id))}}}catch(t){this.setState({error:t.message,loading:!1})}}else this.setState({error:"Household name cannot be empty."})},this.renderDialogs=()=>{const{dialogOpen:e,households:t,newHouseholdName:a,error:r}=this.state;return n.a.createElement(ut.a,{open:e,onClose:(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&this.setState({dialogOpen:!1})},disableEscapeKeyDown:!0},n.a.createElement(gt.a,null,t.length?"Select or Create a Household":"Create a Household"),n.a.createElement(mt.a,null,r&&n.a.createElement(y.a,{color:"error",variant:"body2",gutterBottom:!0},r),n.a.createElement(pt.a,null,t.map(e=>n.a.createElement(bt.a,{button:!0,key:e.id,onClick:()=>this.handleSelectHousehold(e.id),sx:{margin:"10px 0",border:"1px solid #ccc",borderRadius:"8px",padding:"10px 20px","&:hover":{backgroundColor:"#f0f0f0"}}},n.a.createElement(Et.a,null,n.a.createElement(te.a,{color:"primary"})),n.a.createElement(yt.a,{primary:e.name}))),n.a.createElement(bt.a,null,n.a.createElement(ft.a,{label:"New Household Name",type:"text",fullWidth:!0,variant:"outlined",value:a,onChange:this.handleInputChange})))),n.a.createElement(Ot.a,null,n.a.createElement(O.a,{onClick:this.addHousehold,color:"primary"},"Add New Household")))}}componentDidMount(){this.checkForHousehold()}render(){const{loading:e,error:t}=this.state;return e?n.a.createElement(N.a,null):t&&!this.state.dialogOpen?n.a.createElement("p",null,"Error: ",t):this.renderDialogs()}}var It=jt,wt=a(410),St=a(411),vt=a(412),xt=a(413),Ut=a(65),Ct=a.n(Ut),Pt=a(289),Ft=a.n(Pt),Ht=a(66),Rt=a.n(Ht);class At extends r.Component{constructor(){super(...arguments),this.state={user:null,loading:!0,error:null,editDialogOpen:!1},this.loadCurrentUser=async()=>{this.setState({loading:!0});const e=Object(g.b)().currentUser;if(e)try{const t=await ht.getAPI().getUserbyGoogleUserId(e.uid);if(!t||0===t.length)throw new Error("User not found.");this.setState({user:t[0],loading:!1})}catch(t){console.error("Failed to fetch user:",t),this.setState({error:t.message,loading:!1})}else this.setState({error:"No user logged in",loading:!1})},this.handleInputChange=e=>{const t=e.target.name,a=e.target.value;this.setState(e=>({user:{...e.user,[t]:a}}))},this.openEditDialog=()=>{this.setState({editDialogOpen:!0})},this.closeEditDialog=()=>{this.setState({editDialogOpen:!1})},this.updateUser=async()=>{const{user:e}=this.state;if(e.nick_name&&e.first_name&&e.last_name){this.setState({loading:!0});try{await ht.getAPI().updateUser(e),this.closeEditDialog(),this.setState({loading:!1})}catch(t){this.setState({error:t.message,loading:!1})}}else this.setState({error:"Please fill out all fields."})}}componentDidMount(){this.loadCurrentUser()}render(){const{user:e,loading:t,error:a,editDialogOpen:r}=this.state;return t?n.a.createElement(N.a,null):a?n.a.createElement(k,{error:a}):e?n.a.createElement(E.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"lightblue",p:2}},n.a.createElement(wt.a,{raised:!0,sx:{minWidth:300,bgcolor:"background.paper",p:2}},n.a.createElement(St.a,null,n.a.createElement(y.a,{variant:"h5",component:"div",sx:{fontWeight:"medium",mb:2,display:"flex",alignItems:"center",gap:1}},n.a.createElement(Ft.a,{color:"primary"})," Your Profile"),n.a.createElement(y.a,{variant:"body2",color:"text.secondary"},"Nickname: ",e.nick_name,n.a.createElement("br",null),"First Name: ",e.first_name,n.a.createElement("br",null),"Last Name: ",e.last_name)),n.a.createElement(vt.a,null,n.a.createElement(O.a,{startIcon:n.a.createElement(Ct.a,null),onClick:this.openEditDialog,variant:"contained",color:"primary"},"Edit Profile"))),n.a.createElement(ut.a,{open:r,onClose:this.closeEditDialog},n.a.createElement(gt.a,null,"Edit Your Profile",n.a.createElement(W.a,{"aria-label":"close",onClick:this.closeEditDialog,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},n.a.createElement(Rt.a,null))),n.a.createElement(mt.a,null,n.a.createElement(xt.a,null,"Update your profile details."),n.a.createElement(ft.a,{autoFocus:!0,margin:"dense",name:"nick_name",label:"Nickname",type:"text",fullWidth:!0,variant:"outlined",value:e.nick_name,onChange:this.handleInputChange}),n.a.createElement(ft.a,{margin:"dense",name:"first_name",label:"First Name",type:"text",fullWidth:!0,variant:"outlined",value:e.first_name,onChange:this.handleInputChange}),n.a.createElement(ft.a,{margin:"dense",name:"last_name",label:"Last Name",type:"text",fullWidth:!0,variant:"outlined",value:e.last_name,onChange:this.handleInputChange})),n.a.createElement(Ot.a,null,n.a.createElement(O.a,{onClick:this.closeEditDialog},"Cancel"),n.a.createElement(O.a,{onClick:this.updateUser,color:"primary",variant:"contained"},"Update")))):null}}var kt=At,Nt=a(92),Dt=a.n(Nt),_t=a(67),Tt=a.n(_t),Lt=a(405),Jt=a(406),Bt=a(376),Wt=a(414);class Gt extends r.Component{constructor(e){super(e),this.handleFetchGoogleUserId=async()=>{try{const e=Object(g.b)().currentUser;if(e){console.log("Google User ID:",e.uid);const t=await ht.getAPI().getFridgeIdByGoogleUserId(e.uid);this.setState({fridge_id:t.fridge_id,loadingFridgeId:!1})}else console.log("No user is signed in."),this.setState({loadingFridgeId:!1})}catch(e){console.error("Error while fetching fridge ID:",e),this.setState({fridgeIdError:e.message,loadingFridgeId:!1})}},this.fetchHouseholdUnits=async()=>{try{const e=Object(g.b)().currentUser;if(e){const t=await ht.getAPI().getHouseholdIdByGoogleUserId(e.uid),a=await ht.getAPI().getUnitbyHouseholdId(t.household_id);this.setState({units:a.map(e=>e.designation)})}}catch(e){console.error("Error while fetching units:",e),this.setState({error:{message:e.message}})}},this.addFridgeEntry=async()=>{const{designation:e,quantity:t,unit:a,fridge_id:r}=this.state;this.setState({addingInProgress:!0,addingError:null});const n=new Ee(e,t,a,r);ht.getAPI().addFridgeEntry(n).then(e=>{this.setState({...this.baseState}),this.props.onClose(e)}).catch(e=>{console.error("Error while adding fridge entry:",e),this.setState({addingInProgress:!1,addingError:{message:e.message}})})},this.updateFridgeEntry=()=>{const{designation:e,quantity:t,unit:a,fridge_id:r}=this.state;this.setState({updatingInProgress:!0,updatingError:null});const n={id:this.props.fridgeentry.id,fridge_id:r,groceries_designation:e,quantity:t,unit:a};ht.getAPI().updateFridgeEntry(n).then(e=>{this.setState({...this.baseState}),this.props.onClose(e)}).catch(e=>{console.error("Error while updating fridge entry:",e),this.setState({updatingInProgress:!1,updatingError:e.message})})},this.textFieldValueChange=e=>{const t=e.target.value;let a=0===t.trim().length;this.setState({[e.target.id]:t,[e.target.id+"ValidationFailed"]:a,[e.target.id+"Edited"]:!0})},this.handleClose=()=>{this.setState(this.baseState),this.props.onClose(null)};let t="",a="",r="",n="";e.fridgeentry&&(t=e.fridgeentry.getDesignation(),a=e.fridgeentry.getQuantity(),r=e.fridgeentry.getUnit(),n=e.fridgeentry.getFridgeId()),this.state={designation:t,designationValidationFailed:!1,designationEdited:!1,quantity:a,quantityValidationFailed:!1,quantityEdited:!1,unit:r,unitValidationFailed:!1,unitEdited:!1,units:[],fridge_id:n,addingInProgress:!1,updatingInProgress:!1,addingError:null,updatingError:null,loadingFridgeId:!0,fridgeIdError:null},this.baseState={...this.state}}async componentDidMount(){await this.handleFetchGoogleUserId(),await this.fetchHouseholdUnits()}render(){const{fridgeentry:e,show:t}=this.props,{designation:a,designationValidationFailed:r,designationEdited:i,quantity:o,quantityValidationFailed:s,quantityEdited:l,unit:c,unitValidationFailed:d,unitEdited:h,units:u,addingInProgress:g,addingError:m,updatingInProgress:p,updatingError:b,loadingFridgeId:E,fridgeIdError:y}=this.state;let f=e?"Update a Grocery":"Create or update one of your Groceries";return E?n.a.createElement(_,{show:!0}):y?n.a.createElement(k,{error:y,contextErrorMsg:"Error fetching fridge ID"}):t?n.a.createElement(ut.a,{open:t,onClose:this.handleClose,maxWidth:"xs"},n.a.createElement(gt.a,{id:"form-dialog-title"},f,n.a.createElement(W.a,{sx:{position:"absolute",right:1,top:1,color:"grey[500]"},onClick:this.handleClose},n.a.createElement(Rt.a,null))),n.a.createElement(mt.a,null,n.a.createElement(xt.a,null,"Enter Grocery Data"),n.a.createElement("form",{sx:{width:"100%"},noValidate:!0,autoComplete:"off"},n.a.createElement(ft.a,{autoFocus:!0,type:"text",required:!0,fullWidth:!0,margin:"normal",id:"designation",label:"Designation:",value:a,onChange:this.textFieldValueChange,error:r,helperText:r?"The designation must contain at least one character":" "}),n.a.createElement(ft.a,{type:"text",required:!0,fullWidth:!0,margin:"normal",id:"quantity",label:"Quantity:",value:o,onChange:this.textFieldValueChange,error:s,helperText:s?"The quantity must contain at least one character":" "}),n.a.createElement(Lt.a,{fullWidth:!0,margin:"normal"},n.a.createElement(Jt.a,{id:"unit-label"},"Unit"),n.a.createElement(Bt.a,{labelId:"unit-label",id:"unit",value:c,onChange:e=>this.setState({unit:e.target.value,unitEdited:!0}),label:"Unit"},u.map(e=>n.a.createElement(Wt.a,{key:e,value:e},e))))),n.a.createElement(_,{show:g||p}),e?n.a.createElement(k,{error:b,contextErrorMsg:"The fridge entry ".concat(e.getId()," could not be updated."),onReload:this.updateFridgeEntry}):n.a.createElement(k,{error:m,contextErrorMsg:"The fridge entry could not be added.",onReload:this.addFridgeEntry})),n.a.createElement(Ot.a,null,n.a.createElement(O.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),e?n.a.createElement(O.a,{disabled:r||s||d,variant:"contained",onClick:this.updateFridgeEntry,color:"primary"},"Update"):n.a.createElement(O.a,{disabled:r||!i||s||!l||d||!h,variant:"contained",onClick:this.addFridgeEntry,color:"primary"},"Add"))):null}}var qt=Gt;class zt extends r.Component{constructor(e){super(e),this.fetchFridgeEntries=async()=>{const e=Object(g.b)().currentUser,t=await ht.getAPI().getFridgeIdByGoogleUserId(e.uid);this.setState({loading:!0});try{const e=await ht.getAPI().getFridgeEntriesbyFridgeId(t.fridge_id),a=Ee.fromJSON(e);this.setState({fridgeEntries:a,loading:!1})}catch(a){console.error("Failed to fetch fridge entries:",a),this.setState({error:a,loading:!1})}},this.handleAddButtonClick=()=>{this.setState({showAddForm:!0,editEntry:null})},this.handleFormClose=e=>{e&&this.fetchFridgeEntries(),this.setState({showAddForm:!1})},this.handleEditButtonClick=e=>{this.setState({showAddForm:!0,editEntry:e})},this.handleDeleteButtonClick=async e=>{try{await ht.getAPI().deleteFridgeEntry(e),this.fetchFridgeEntries()}catch(t){console.error("Failed to delete fridge entry:",t),this.setState({error:"Failed to delete entry: ".concat(e)})}},this.state={fridgeEntries:[],showAddForm:!1,loading:!1,error:null,editEntry:null}}componentDidMount(){this.fetchFridgeEntries()}render(){const{fridgeEntries:e,showAddForm:t,loading:a,error:r,editEntry:i}=this.state;return a?n.a.createElement(_,{show:!0}):r?n.a.createElement(k,{error:r,contextErrorMsg:"Failed to load fridge entries."}):n.a.createElement(f.a,{container:!0,spacing:2,style:{padding:20}},n.a.createElement(f.a,{item:!0,xs:12,style:{textAlign:"center"}},n.a.createElement(O.a,{variant:"contained",color:"primary",startIcon:n.a.createElement(Dt.a,null),onClick:this.handleAddButtonClick},"Add a Grocery")),e.map(e=>n.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,key:e.getId()},n.a.createElement(wt.a,null,n.a.createElement(St.a,null,n.a.createElement(y.a,{variant:"h5"},e.getDesignation()),n.a.createElement(y.a,{color:"textSecondary"},"Quantity: ",e.getQuantity()," ",e.getUnit())),n.a.createElement(vt.a,null,n.a.createElement(O.a,{size:"small",startIcon:n.a.createElement(Ct.a,null),onClick:()=>this.handleEditButtonClick(e)},"Edit"),n.a.createElement(O.a,{size:"small",startIcon:n.a.createElement(Tt.a,null),onClick:()=>this.handleDeleteButtonClick(e.getDesignation())},"Delete"))))),t&&n.a.createElement(qt,{show:t,fridgeentry:i,onClose:this.handleFormClose}))}}var Mt=zt;class Qt extends r.Component{render(){return n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("h1",null,"Willkommen in unsere SmartFridge Anwendung!"),";")}}var Vt=Qt,Kt=a(415);var Yt=()=>n.a.createElement(E.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",bgcolor:"#e0f7fa",padding:2}},n.a.createElement(wt.a,{sx:{maxWidth:800,padding:2,borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"}},n.a.createElement(Kt.a,{component:"img",height:"200",image:I.a,alt:"Smart Fridge"}),n.a.createElement(St.a,null,n.a.createElement(y.a,{variant:"h4",component:"div",sx:{fontWeight:"bold",marginBottom:2}},"About our Application:"),n.a.createElement(y.a,{variant:"body1",color:"text.secondary",paragraph:!0},"Welcome to our SmartFridge application!"),n.a.createElement(y.a,{variant:"body1",color:"text.secondary",paragraph:!0},n.a.createElement("strong",null,"Key Features:")),n.a.createElement(y.a,{variant:"body1",color:"text.secondary",component:"ul",paragraph:!0},n.a.createElement("li",null,"Inventory management"),n.a.createElement("li",null,"Cooking Recipes"),n.a.createElement("li",null,"Recipe Management")),n.a.createElement(y.a,{variant:"body1",color:"text.secondary",paragraph:!0},"We want to minimize food waste and help you to cook delicious meals with the ingredients you have at home."),n.a.createElement(y.a,{variant:"body1",color:"text.secondary",paragraph:!0},"Thank you for using our application!"))));class Zt extends r.Component{constructor(){super(...arguments),this.state={users:[],householdName:"",newHouseholdName:"",householdId:null,fridgeId:null,loading:!0,error:null,households:[],selectedHouseholdId:null,dialogOpen:!1},this.loadHouseholdUsers=async()=>{const e=Object(g.b)().currentUser;if(e)try{const t=await ht.getAPI().getUserbyGoogleUserId(e.uid);if(t&&t.length>0&&t[0].household_id){const e=await ht.getAPI().getUsersbyHouseholdID(t[0].household_id),a=(await ht.getAPI().getHouseholdbyID(t[0].household_id))[0];this.setState({users:e,householdName:a.name,newHouseholdName:a.name,householdId:t[0].household_id,fridgeId:a.fridge_id,loading:!1})}else this.setState({error:"User has no associated household.",loading:!1})}catch(t){this.setState({error:t.message,loading:!1})}else this.setState({error:"No user logged in",loading:!1})},this.updateHouseholdName=async()=>{const{newHouseholdName:e,householdId:t,fridgeId:a}=this.state;if(Object(g.b)().currentUser)try{const r=new ye(e,a);r.setId(t),await ht.getAPI().updateHousehold(r),this.setState({householdName:e})}catch(r){this.setState({error:r.message,loading:!1})}else this.setState({error:"No user logged in",loading:!1})},this.handleInputChange=e=>{this.setState({newHouseholdName:e.target.value})},this.fetchHouseholds=async()=>{try{const e=await ht.getAPI().getHouseholds();this.setState({households:e})}catch(e){this.setState({error:e.message})}},this.handleSelectHousehold=async e=>{const t=Object(g.b)().currentUser;if(t)try{let a=await ht.getAPI().getUserbyGoogleUserId(t.uid);if(!(a&&a.length>0))throw new Error("User profile not found.");{let t=a[0];t.household_id=e,await ht.getAPI().updateUser(t),this.setState({householdId:e,dialogOpen:!1}),this.loadHouseholdUsers()}}catch(a){this.setState({error:a.message})}else this.setState({error:"No user logged in"})},this.addHousehold=async()=>{const{newHouseholdName:e}=this.state,t=Object(g.b)().currentUser;if(t)if(e.trim())try{let a=new ye({name:e,id:0,fridge_id:null});const r=await ht.getAPI().addHousehold(a);let n=await ht.getAPI().getUserbyGoogleUserId(t.uid);if(!(n&&n.length>0))throw new Error("Failed to fetch user data for updating.");{let t=n[0];t.household_id=r.id,await ht.getAPI().updateUser(t),this.setState({householdId:r.id,householdName:e,newHouseholdName:"",dialogOpen:!1}),this.loadHouseholdUsers()}}catch(a){this.setState({error:a.message})}else this.setState({error:"Household name cannot be empty."});else this.setState({error:"No user logged in"})},this.deletecurrentHousehold=async()=>{const{navigate:e}=this.props,t=Object(g.b)(),a=t.currentUser;if(a)try{let r=await ht.getAPI().getHouseholdIdByGoogleUserId(a.uid);await ht.getAPI().deleteHousehold(r.household_id),e("/home"),t.signOut()}catch(r){this.setState({error:r.message})}else this.setState({error:"No user logged in"})},this.renderDialogs=()=>{const{dialogOpen:e,households:t,newHouseholdName:a,error:r}=this.state;return n.a.createElement(ut.a,{open:e,onClose:()=>this.setState({dialogOpen:!1})},n.a.createElement(gt.a,null,t.length?"Select or Create a Household":"Create a Household"),n.a.createElement(mt.a,null,r&&n.a.createElement(y.a,{color:"error",variant:"body2",gutterBottom:!0},r),n.a.createElement(pt.a,null,t.map(e=>n.a.createElement(bt.a,{button:!0,key:e.id,onClick:()=>this.handleSelectHousehold(e.id),sx:{margin:"10px 0",border:"1px solid #ccc",borderRadius:"8px",padding:"10px 20px","&:hover":{backgroundColor:"#f0f0f0"}}},n.a.createElement(Et.a,null,n.a.createElement(te.a,{color:"red"})),n.a.createElement(yt.a,{primary:e.name}))),n.a.createElement(bt.a,null,n.a.createElement(ft.a,{label:"New Household Name",type:"text",fullWidth:!0,variant:"outlined",value:a,onChange:this.handleInputChange})))),n.a.createElement(Ot.a,null,n.a.createElement(O.a,{onClick:this.addHousehold,color:"primary"},"Add New Household")))}}componentDidMount(){this.loadHouseholdUsers()}render(){const{users:e,householdName:t,newHouseholdName:a,loading:r,error:i,dialogOpen:o}=this.state;return r?n.a.createElement(E.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"}},n.a.createElement(N.a,null)):i?n.a.createElement(y.a,{color:"error"},i):n.a.createElement(E.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"lightblue",padding:2}},n.a.createElement(wt.a,{raised:!0,sx:{width:"100%",maxWidth:600,p:2}},n.a.createElement(St.a,null,n.a.createElement(y.a,{variant:"h4",component:"h2",gutterBottom:!0,align:"center"},"Household: ",t),n.a.createElement(E.a,{sx:{mb:2}},n.a.createElement(ft.a,{fullWidth:!0,label:"Edit Household Name",variant:"outlined",value:a,onChange:this.handleInputChange}),n.a.createElement(O.a,{variant:"contained",color:"primary",onClick:this.updateHouseholdName,sx:{mt:1,width:"100%"}},"Save"),n.a.createElement(O.a,{variant:"contained",color:"primary",onClick:()=>{this.setState({dialogOpen:!0}),this.fetchHouseholds()},sx:{mt:1,width:"100%"}},"Switch Households or Create a new Household"),n.a.createElement(O.a,{variant:"contained",color:"primary",onClick:this.deletecurrentHousehold,sx:{mt:1,width:"100%"}},"Delete Current Household")),n.a.createElement(M.a,{sx:{marginBottom:2}}),n.a.createElement(y.a,{variant:"h5",component:"h3",gutterBottom:!0,align:"center"},"Household Members"),n.a.createElement(pt.a,null,e.map(e=>n.a.createElement(bt.a,{key:e.id,sx:{borderRadius:2,mb:1,bgcolor:"background.paper",boxShadow:1}},n.a.createElement(G.a,{sx:{mr:2}},e.first_name.charAt(0)),n.a.createElement(yt.a,{primary:"".concat(e.first_name," ").concat(e.last_name),secondary:e.nick_name,primaryTypographyProps:{fontWeight:"bold"}})))))),o&&this.renderDialogs())}}var $t=()=>{const e=Object(l.p)();return n.a.createElement(Zt,{navigate:e})};var Xt=function(e){let{recipeentry:t,show:a,onClose:i}=e;const[o,s]=Object(r.useState)(""),[l,c]=Object(r.useState)(!1),[d,h]=Object(r.useState)(!1),[u,m]=Object(r.useState)(""),[p,b]=Object(r.useState)(!1),[E,y]=Object(r.useState)(!1),[f,j]=Object(r.useState)(""),[I,w]=Object(r.useState)(""),[S,v]=Object(r.useState)(!1),[x,U]=Object(r.useState)(!1),[C,P]=Object(r.useState)(""),[F,H]=Object(r.useState)(!1),[R,A]=Object(r.useState)(!1),[N,D]=Object(r.useState)(null),[T,L]=Object(r.useState)(null),[J,B]=Object(r.useState)(!0),[G,q]=Object(r.useState)(null);Object(r.useEffect)(()=>{t&&(s(t.getTitle()),m(t.getNumberOfPersons()),j(t.getCreator()),w(t.getDescription()),P(t.getHouseholdId())),z()},[t]);const z=async()=>{try{const e=Object(g.b)().currentUser;if(e){const t=await ht.getAPI().getHouseholdIdByGoogleUserId(e.uid);j(e.uid),P(t.household_id),B(!1)}else B(!1)}catch(e){q(e.message),B(!1)}},M=async()=>{H(!0),D(null);const e=new pe(o,f,u,I,C);try{const t=await ht.getAPI().addRecipe(e);i(t)}catch(t){D({message:t.message})}finally{H(!1)}},Q=async()=>{A(!0),L(null);const e=new pe(o,f,u,I,C);e.setId(t.getId());try{const t=await ht.getAPI().updateRecipe(e);i(t)}catch(a){L({message:a.message})}finally{A(!1)}},V=e=>{const{id:t,value:a}=e.target,r=a.trim(),n=r.length>0;switch(t){case"title":s(a),c(0===r.length),h(n);break;case"numberOfPersons":m(a),b(isNaN(a)||0===r.length),y(n);break;case"description":w(a),v(0===r.length),U(n)}},K=()=>{i(null)},Y=t?"Update a Recipe":"Create a new Recipe",Z=t?"Recipe ID: ".concat(t.getId()):"Enter Recipe Data";return J?n.a.createElement(_,{show:!0}):G?n.a.createElement(k,{error:G,contextErrorMsg:"Error fetching household ID"}):a?n.a.createElement(ut.a,{open:a,onClose:K,maxWidth:"xs"},n.a.createElement(gt.a,{id:"form-dialog-title"},Y,n.a.createElement(W.a,{sx:{position:"absolute",right:1,top:1,color:"grey[500]"},onClick:K},n.a.createElement(Rt.a,null))),n.a.createElement(mt.a,null,n.a.createElement(xt.a,null,Z),n.a.createElement("form",{sx:{width:"100%"},noValidate:!0,autoComplete:"off"},n.a.createElement(ft.a,{autoFocus:!0,type:"text",required:!0,fullWidth:!0,margin:"normal",id:"title",label:"Title:",value:o,onChange:V,error:l,helperText:l?"The title must contain at least one character":" "}),n.a.createElement(ft.a,{type:"number",required:!0,fullWidth:!0,margin:"normal",id:"numberOfPersons",label:"Number of Persons:",value:u,onChange:V,error:p,helperText:p?"The number of persons must be a valid number":" "}),n.a.createElement(ft.a,{type:"text",required:!0,fullWidth:!0,margin:"normal",id:"description",label:"Description:",value:I,onChange:V,error:S,helperText:S?"The description must contain at least one character":" "})),n.a.createElement(_,{show:F||R}),t?n.a.createElement(k,{error:T,contextErrorMsg:"The recipe ".concat(t.getId()," could not be updated."),onReload:Q}):n.a.createElement(k,{error:N,contextErrorMsg:"The recipe could not be added.",onReload:M})),n.a.createElement(Ot.a,null,n.a.createElement(O.a,{onClick:K,color:"secondary"},"Cancel"),t?n.a.createElement(O.a,{disabled:l||p||S,variant:"contained",onClick:Q,color:"primary"},"Update"):n.a.createElement(O.a,{disabled:l||!d||p||!E||S||!x,variant:"contained",onClick:M,color:"primary"},"Add"))):null},ea=a(290),ta=a.n(ea);var aa=function(e){let{recipe:t,onEdit:a,onDelete:r,onViewEntries:i,onCook:o}=e;return n.a.createElement(wt.a,null,n.a.createElement(St.a,null,n.a.createElement(y.a,{variant:"h5"},t.getTitle()),n.a.createElement(y.a,{color:"textSecondary"},"Portionen: ",t.getNumberOfPersons()," ",n.a.createElement("br",null),"Beschreibung: ",t.getDescription())),n.a.createElement(vt.a,null,n.a.createElement(O.a,{size:"small",startIcon:n.a.createElement(Ct.a,null),onClick:()=>a(t)},"Rezept bearbeiten"),n.a.createElement(O.a,{size:"small",startIcon:n.a.createElement(Tt.a,null),onClick:()=>r(t)},"Entfernen"),n.a.createElement(O.a,{size:"small",startIcon:n.a.createElement(ie.a,null),onClick:()=>i(t.getId())},"Zeige Zutaten"),n.a.createElement(O.a,{size:"small",startIcon:n.a.createElement(ta.a,null),onClick:()=>o(t)},"Cook Recipe")))};const ra={liters:{milliliters:1e3,liters:1},milliliters:{liters:.001,milliliters:1},kilograms:{grams:1e3,kilograms:1},grams:{kilograms:.001,grams:1},pieces:{pieces:1},cups:{cups:1},pinch:{pinch:1}};var na=function(){const[e,t]=Object(r.useState)([]),[a,i]=Object(r.useState)([]),[o,s]=Object(r.useState)(!1),[c,d]=Object(r.useState)(!1),[h,u]=Object(r.useState)(null),[m,p]=Object(r.useState)(null),b=Object(l.p)();Object(r.useEffect)(()=>{E(),y()},[]);const E=async()=>{d(!0);const e=Object(g.b)().currentUser;try{const a=await ht.getAPI().getHouseholdIdByGoogleUserId(e.uid),r=await ht.getAPI().getRecipesbyhouseholdId(a.household_id),n=pe.fromJSON(r);t(n),d(!1)}catch(h){u(h),d(!1)}},y=async()=>{d(!0);const e=Object(g.b)().currentUser;try{const t=await ht.getAPI().getFridgeIdByGoogleUserId(e.uid),a=await ht.getAPI().getFridgeEntriesbyFridgeId(t.fridge_id),r=Ee.fromJSON(a);i(r),d(!1)}catch(h){u(h),d(!1)}},j=e=>{s(!0),p(e)},I=async e=>{try{await ht.getAPI().deleteRecipe(e.getId()),E()}catch(h){u(h)}},w=e=>{b("/recipes/entries/".concat(e))},S=async e=>{try{const i=[],o=await ht.getAPI().getRecipeEntriesByRecipeId(e.getId()),s=be.fromJSON(o);for(const e of s){const o=a.find(t=>t.getDesignation()===e.getDesignation());if(o){const a=(t=e.getQuantity(),r=e.getUnit(),n=o.getUnit(),ra[r]&&ra[r][n]?t*ra[r][n]:null);(null===a||o.getQuantity()<a)&&i.push(e)}else i.push(e)}i.length>0?(console.log("Missing ingredients:",i),alert("Not enough ingredients in fridge. Please check the console for missing ingredients.")):(await ht.getAPI().cookRecipe(e.getTitle()),y())}catch(h){console.error("Error during cooking process:",h),u(h)}var t,r,n};return c?n.a.createElement(_,{show:!0}):h?n.a.createElement(k,{error:h,contextErrorMsg:"Failed to load recipes."}):n.a.createElement(f.a,{container:!0,spacing:2,style:{padding:20,justifyContent:"center",alignItems:"center"}},n.a.createElement(f.a,{item:!0,xs:12,style:{textAlign:"center"}},n.a.createElement(O.a,{variant:"contained",color:"primary",startIcon:n.a.createElement(Dt.a,null),onClick:()=>{s(!0),p(null)}},"Neues Rezept anlegen")),e.map(e=>n.a.createElement(f.a,{item:!0,xs:12,sm:8,md:8,key:e.getId()},n.a.createElement(aa,{recipe:e,onEdit:j,onDelete:I,onViewEntries:w,onCook:S}))),o&&n.a.createElement(Xt,{show:o,recipeentry:m,onClose:e=>{e&&E(),s(!1)}}))};var ia=function(e){let{entry:t,show:a,onClose:i,recipeId:o}=e;const[s,l]=Object(r.useState)(""),[c,d]=Object(r.useState)(""),[h,u]=Object(r.useState)(""),[m,p]=Object(r.useState)([]),[b,E]=Object(r.useState)(!1),[y,f]=Object(r.useState)(!1),[j,I]=Object(r.useState)(null);Object(r.useEffect)(()=>{(async()=>{try{const e=Object(g.b)().currentUser;if(e){const t=await ht.getAPI().getHouseholdIdByGoogleUserId(e.uid),a=await ht.getAPI().getUnitbyHouseholdId(t.household_id);p(a.map(e=>e.designation))}}catch(e){w(e)}})(),t?(l(t.getDesignation()),d(t.getQuantity()),u(t.getUnit())):(l(""),d(""),u(""))},[t]);const w=e=>{console.error(e),I({message:e.message})},S=async()=>{if(!s||!c||!h)return void I({message:"All fields are required"});E(!0),I(null);const e=new be(s,c,h,o);try{const t=await ht.getAPI().addRecipeEntry(e);i(t)}catch(t){w(t)}finally{E(!1)}},v=async()=>{if(!s||!c||!h)return void I({message:"All fields are required"});f(!0),I(null);const e=new be(s,c,h,o);e.setId(t.getId()),e.setRecipeId(o);try{const t=await ht.getAPI().updateRecipeEntry(e);console.log(t),i(t)}catch(a){w(a)}finally{f(!1)}},x=()=>{i(null)};return a&&n.a.createElement(ut.a,{open:a,onClose:x,maxWidth:"xs"},n.a.createElement(gt.a,null,t?"Update an Ingredient":"Create an Ingredient",n.a.createElement(W.a,{onClick:x},n.a.createElement(Rt.a,null))),n.a.createElement(mt.a,null,n.a.createElement(xt.a,null,"Enter Ingredient Data"),n.a.createElement(ft.a,{autoFocus:!0,margin:"dense",id:"designation",label:"Designation",type:"text",fullWidth:!0,value:s,onChange:e=>l(e.target.value)}),n.a.createElement(ft.a,{margin:"dense",id:"quantity",label:"Quantity",type:"text",fullWidth:!0,value:c,onChange:e=>d(e.target.value)}),n.a.createElement(Lt.a,{fullWidth:!0,margin:"dense"},n.a.createElement(Jt.a,{id:"unit-label"},"Unit"),n.a.createElement(Bt.a,{labelId:"unit-label",id:"unit",value:h,onChange:e=>u(e.target.value),label:"Unit"},m.map(e=>n.a.createElement(Wt.a,{key:e,value:e},e)))),n.a.createElement(_,{show:b||y}),n.a.createElement(k,{error:j,contextErrorMsg:t?"The recipe entry ".concat(t.getId()," could not be updated."):"The recipe entry could not be added.",onReload:t?v:S})),n.a.createElement(Ot.a,null,n.a.createElement(O.a,{onClick:x,color:"secondary"},"Cancel"),n.a.createElement(O.a,{onClick:t?v:S,color:"primary"},t?"Update":"Add")))};var oa=function(e){let{recipeEntry:t,onEdit:a,onDelete:r,isEntryAvailableInFridge:i}=e;return t?n.a.createElement(wt.a,null,n.a.createElement(St.a,null,n.a.createElement(y.a,{variant:"h5",style:{color:i(t)?"black":"red"}},t.getDesignation()),n.a.createElement(y.a,{color:"textSecondary",style:{color:i(t)?"black":"red"}},"Quantity: ",t.getQuantity()," ",t.getUnit(),!i(t)&&" (Not available in fridge)")),n.a.createElement(vt.a,null,n.a.createElement(O.a,{size:"small",startIcon:n.a.createElement(Ct.a,null),onClick:()=>a(t)},"Edit"),n.a.createElement(O.a,{size:"small",startIcon:n.a.createElement(Tt.a,null),onClick:()=>r(t)},"Delete"))):null};const sa={liters:{milliliters:1e3,liters:1},milliliters:{liters:.001,milliliters:1},kilograms:{grams:1e3,kilograms:1},grams:{kilograms:.001,grams:1},pieces:{pieces:1},cups:{cups:1},pinch:{pinch:1}};var la=function(){const{recipeId:e}=Object(l.r)(),[t,a]=Object(r.useState)([]),[i,o]=Object(r.useState)([]),[s,c]=Object(r.useState)(!1),[d,h]=Object(r.useState)(!1),[u,m]=Object(r.useState)(null),[p,b]=Object(r.useState)(null);Object(r.useEffect)(()=>{E()},[e]);const E=async()=>{h(!0);try{const t=await ht.getAPI().getRecipeEntriesByRecipeId(e),r=be.fromJSON(t);a(r);const n=Object(g.b)().currentUser,i=await ht.getAPI().getFridgeIdByGoogleUserId(n.uid),s=await ht.getAPI().getFridgeEntriesbyFridgeId(i.fridge_id),l=Ee.fromJSON(s);o(l),h(!1)}catch(u){console.error("Error fetching entries:",u),m(u),h(!1)}},y=e=>{c(!0),b(e)},j=async t=>{try{let a=t.getDesignation();await ht.getAPI().deleteRecipeEntry(a,e);E()}catch(u){console.error("Error during API call: ",u),m(u)}},I=e=>i.some(t=>{if(t.getDesignation()===e.getDesignation()){const a=function(e,t,a){if(sa[t]&&sa[t][a])return e*sa[t][a];return null}(e.getQuantity(),e.getUnit(),t.getUnit());return null!==a&&t.getQuantity()>=a}return!1});return d?n.a.createElement(_,{show:!0}):u?n.a.createElement(k,{error:u,contextErrorMsg:"Failed to load ingredients."}):n.a.createElement(f.a,{container:!0,spacing:2,style:{padding:20,textAlign:"center"}},n.a.createElement(f.a,{item:!0,xs:12},n.a.createElement(O.a,{variant:"contained",color:"primary",startIcon:n.a.createElement(Dt.a,null),onClick:()=>{c(!0),b(null)}},"Add Ingredient")),0===t.length?n.a.createElement(f.a,{item:!0,xs:12},n.a.createElement("p",null,"No ingredients found. Add a new ingredient to get started.")):t.map(e=>n.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,key:e.getId()},n.a.createElement(oa,{recipeEntry:e,fridgeEntries:i,onEdit:y,onDelete:j,isEntryAvailableInFridge:I}))),s&&n.a.createElement(ia,{show:s,entry:p,onClose:e=>{c(!1),e&&E()},recipeId:parseInt(e)}))},ca=a(416),da=a(390);const ha=["liters","milliliters","kilograms","grams","pieces","cups","pinch"];var ua=e=>{let{householdId:t}=e;const[a,i]=Object(r.useState)([]),[o,s]=Object(r.useState)(""),[l,c]=Object(r.useState)(""),[d,u]=Object(r.useState)(!1),[m,p]=Object(r.useState)(!1);Object(r.useEffect)(()=>{b()},[]);const b=async()=>{p(!0);const e=Object(g.b)().currentUser,t=await ht.getAPI().getHouseholdIdByGoogleUserId(e.uid);try{const e=await ht.getAPI().getUnitbyHouseholdId(t.household_id);i(e||[])}catch(l){console.error("Failed to fetch units:",l),i([])}p(!1)},f=()=>{u(!1)};return n.a.createElement(h.a,null,n.a.createElement(y.a,{variant:"h4",gutterBottom:!0,style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"5px",margin:"20px"}},"All available Units"),m?n.a.createElement(ca.a,null):0===a.length?n.a.createElement(y.a,{variant:"body1",style:{textAlign:"center",marginTop:"20px"}},"No units available."):n.a.createElement(pt.a,null,a.map(e=>n.a.createElement(bt.a,{style:{border:"1px solid #ccc",borderRadius:"5px",marginBottom:"5px"},key:e.id,secondaryAction:n.a.createElement(W.a,{edge:"end","aria-label":"delete",onClick:()=>(async e=>{try{await ht.getAPI().deleteUnit(e),b()}catch(l){console.error("Failed to delete unit:",l)}})(e.id)},n.a.createElement(Tt.a,null))},n.a.createElement(yt.a,{primary:e.designation})))),n.a.createElement(E.a,{mt:4},n.a.createElement(y.a,{variant:"h5",gutterBottom:!0},"Add Unit"),n.a.createElement(ft.a,{label:"New Unit",value:o,onChange:e=>s(e.target.value),fullWidth:!0,variant:"outlined"}),n.a.createElement(E.a,{mt:2},n.a.createElement(O.a,{variant:"contained",color:"primary",onClick:async()=>{if(!ha.includes(o.toLowerCase()))return void c("Invalid unit. Please type in a real world Unit.");const e=Object(g.b)().currentUser;try{const t=await ht.getAPI().getHouseholdIdByGoogleUserId(e.uid),a=new Oe(o,t.household_id);await ht.getAPI().addUnit(a),b(),s(""),c(""),u(!0)}catch(l){console.error("Failed to add unit:",l),c("Failed to add unit")}}},"Add")),l&&n.a.createElement(E.a,{mt:2},n.a.createElement(C.a,{severity:"error"},l))),n.a.createElement(da.a,{open:d,autoHideDuration:6e3,onClose:f},n.a.createElement(C.a,{onClose:f,severity:"success",sx:{width:"100%"}},"Unit added successfully!")))};class ga extends n.a.Component{constructor(e){super(e),this.handleSignIn=()=>{this.setState({authLoading:!0}),Object(g.d)(ga.auth,ga.provider)},this.onHouseholdConfirmed=async e=>{const t=Object(g.b)().currentUser;if(t){this.setState({loading:!0});try{let a=await ht.getAPI().getUserbyGoogleUserId(t.uid);if(!(a&&a.length>0))throw new Error("User profile not found.");{let t=a[0];t.household_id=e,await ht.getAPI().updateUser(t),this.setState({loading:!1,dialogOpen:!1,selectedHouseholdId:e})}}catch(a){this.setState({error:a.message,loading:!1}),console.error("Failed to update user's household:",a)}}else this.setState({error:"No authenticated user found."})},this.state={currentHouseholdId:null,currentUser:null,appError:null,authError:null,authLoading:!1},this.onHouseholdConfirmed=this.onHouseholdConfirmed.bind(this),ga.firebaseInitialized||(ga.app=Object(u.a)(v),ga.auth=Object(g.b)(ga.app),ga.provider=new g.a,ga.firebaseInitialized=!0)}static getDerivedStateFromError(e){return{appError:e}}componentDidMount(){this.unsubscribeFromAuth=Object(g.c)(ga.auth,async e=>{if(e){this.setState({authLoading:!0,currentUser:e});if(!(await ht.getAPI().getUserbyGoogleUserId(e.uid))[0].google_user_id){var t,a,r;let n={id:0,first_name:(null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[0])||"",last_name:(null===(a=e.displayName)||void 0===a?void 0:a.split(" ")[1])||"",nick_name:(null===(r=e.displayName)||void 0===r?void 0:r.split(" ")[0])||"User",google_user_id:e.uid,household_id:null};await ht.getAPI().addUser(n)}this.setState({currentUser:e,authError:null,authLoading:!1})}else this.setState({currentUser:null,authLoading:!1})})}componentWillUnmount(){this.unsubscribeFromAuth&&this.unsubscribeFromAuth()}render(){const{currentUser:e,appError:t,authError:a,authLoading:r}=this.state;return n.a.createElement(c.a,{theme:b},n.a.createElement(d.a,null),n.a.createElement(s.a,null,n.a.createElement(h.a,{maxWidth:"md",style:{display:"flex",flexDirection:"column"}},n.a.createElement(he,{user:e}),n.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},n.a.createElement(l.d,null,n.a.createElement(l.b,{path:"/",element:e?n.a.createElement(l.a,{replace:!0,to:"/home"}):n.a.createElement(S,{onSignIn:this.handleSignIn})}),n.a.createElement(l.b,{path:"/home",element:n.a.createElement(pa,{user:e},n.a.createElement(It,{onHouseholdConfirmed:this.onHouseholdConfirmed}),n.a.createElement(Vt,null))}),n.a.createElement(l.b,{path:"/user",element:n.a.createElement(pa,{user:e},n.a.createElement(kt,null))}),n.a.createElement(l.b,{path:"/fridge",element:n.a.createElement(pa,{user:e},n.a.createElement(Mt,null))}),n.a.createElement(l.b,{path:"/household",element:n.a.createElement(pa,{user:e},n.a.createElement($t,null))}),n.a.createElement(l.b,{path:"/recipe",element:n.a.createElement(pa,{user:e},n.a.createElement(na,null))}),n.a.createElement(l.b,{path:"/recipes/entries/:recipeId",element:n.a.createElement(pa,{user:e},n.a.createElement(la,null))}),n.a.createElement(l.b,{path:"/unit",element:n.a.createElement(pa,{user:e},n.a.createElement(ua,null))}),n.a.createElement(l.b,{path:"/about",element:n.a.createElement(pa,{user:e},n.a.createElement(Yt,null))})),n.a.createElement(_,{show:r}),n.a.createElement(k,{error:a,contextErrorMsg:"Something went wrong during sign in process.",onReload:this.handleSignIn}),n.a.createElement(k,{error:t,contextErrorMsg:"Something went wrong inside the app. Please reload the page."})))))}}var ma=ga;function pa(e){let{user:t,children:a}=e,r=Object(l.n)();return t?a:n.a.createElement(l.a,{to:"/",state:{from:r},replace:!0})}o.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ma,null)))}},[[309,1,2]]]);
//# sourceMappingURL=main.6f2e13b0.chunk.js.map